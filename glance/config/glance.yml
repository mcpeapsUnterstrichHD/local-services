# Copyright (c) 2025 mcpeaps_HD
#
# This software is released under the MIT License.
# https://opensource.org/licenses/MIT
server:
  port: 8086
  host: 0.0.0.0
  assets-path: /app/assets

theme:
  background-color: 221 17 22
  primary-color: 92 29 64
  contrast-multiplier: 1.2
  positive-color: 92 29 64
  negative-color: 355 44 57
  custom-css-file: /assets/user.css

pages:
  # It's not necessary to create a new file for each page and include it, you can simply
  # put its contents here, though multiple pages are easier to manage when separated
  - name: Home
    # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
    # hide-desktop-navigation: true
    slug: home
    title: Home
    center-vertically: true
    expand-mobile-page-navigation: true
    show-mobile-header: true
    columns:
      - size: small
        title: Social
        widgets:
          - type: twitch-channels
            channels:
              - tsoding
              - christitustech
          - type: videos
            channels:
              - UCXuqSBlHAE6Xw-yeJA0Tunw # Linus Tech Tips
              - UCEbYhDd6c6vngsF5PQpFVWg # Tsoding
              - UCrqM0Ym_NbK1fqeQG2VIohg # Tsoding Daily
              - UCqwGaUvq_l0RKszeHhZ5leA # PietSmiet
              - UCHnyfMqiRRG1u-2MsSQLbXA # Veritasium
            style: vertical-list
      - size: full
        widgets:
          - type: search
            search-engine: https://search.localhost/search?q={QUERY}
            new-tab: true
            autofocus: true
            placeholder: Search the web...
          - type: group
            title: Repositories
            widgets:
              - type: releases
                cache: 1d
                # Without authentication the Github API allows for up to 60 requests per hour. You can create a
                # read-only token from your Github account settings and use it here to increase the limit.
                token: ${GITHUB_TOKEN}
                show-source-icon: true
                repositories:
                  - searxng/searxng
                  - NginxProxyManager/nginx-proxy-manager
                  - phpmyadmin/docker
                  - sharevb/it-tools
                  - Stirling-Tools/Stirling-PDF
                  - glanceapp/glance
                  - MariaDB/mariadb-docker
              - type: repository
                title: SearXNG
                token: ${GITHUB_TOKEN}
                repository: searxng/searxng
              - type: repository
                title: Nginx Proxy Manager
                token: ${GITHUB_TOKEN}
                repository: NginxProxyManager/nginx-proxy-manager
              - type: repository
                title: phpMyAdmin
                token: ${GITHUB_TOKEN}
                repository: phpmyadmin/docker
              - type: repository
                title: IT Tools
                token: ${GITHUB_TOKEN}
                repository: sharevb/it-tools
              - type: repository
                title: Stirling-PDF
                token: ${GITHUB_TOKEN}
                repository: Stirling-Tools/Stirling-PDF
              - type: repository
                title: Glance | Dashboard
                token: ${GITHUB_TOKEN}
                repository: glanceapp/glance
              - type: repository
                title: MariaDB
                token: ${GITHUB_TOKEN}
                repository: MariaDB/mariadb-docker
          - type: custom-api
            title: Uptime Kumas
            title-url: ${UPTIME_KUMA_URL}
            url: ${UPTIME_KUMA_URL}/api/status-page/${UPTIME_KUMA_STATUS_SLUG}
            subrequests:
              heartbeats:
                url: ${UPTIME_KUMA_URL}/api/status-page/heartbeat/${UPTIME_KUMA_STATUS_SLUG}
            cache: 10m
            template: |
              {{ $hb := .Subrequest "heartbeats" }}

              {{ if not (.JSON.Exists "publicGroupList") }}
              <p class="color-negative">Error reading response</p>
              {{ else if eq (len (.JSON.Array "publicGroupList")) 0 }}
              <p>No monitors found</p>
              {{ else }}

              <ul class="dynamic-columns list-gap-8">
                {{ range .JSON.Array "publicGroupList" }}
                {{ range .Array "monitorList" }}
                {{ $id := .String "id" }}
                {{ $hbArray := $hb.JSON.Array (print "heartbeatList." $id) }}
                <div class="flex items-center gap-12">
                  <a class="size-title-dynamic color-highlight text-truncate block grow" href="${UPTIME_KUMA_URL}/dashboard/{{ $id }}"
                    target="_blank" rel="noreferrer">
                    {{ .String "name" }} </a>

                  {{ if gt (len $hbArray) 0 }}
                    {{ $latest := index $hbArray (sub (len $hbArray) 1) }}
                    {{ if eq ($latest.Int "status") 1 }}
                    <div>{{ $latest.Int "ping" }}ms</div>
                    <div class="monitor-site-status-icon-compact" title="OK">
                      <svg fill="var(--color-positive)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                          d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z"
                          clip-rule="evenodd"></path>
                      </svg>
                    </div>
                    {{ else }}
                    <div><span class="color-negative">DOWN</span></div>
                    <div class="monitor-site-status-icon-compact" title="{{ if $latest.Exists "msg" }}{{ $latest.String "msg" }}{{ else
                      }}Error{{ end }}">
                      <svg fill="var(--color-negative)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                          d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"
                          clip-rule="evenodd"></path>
                      </svg>
                    </div>
                    {{ end }}
                  {{ else }}
                    <div><span class="color-negative">No data</span></div>
                    <div class="monitor-site-status-icon-compact" title="No data available">
                      <svg fill="var(--color-negative)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-.75-8a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-1.5 0V8zm.75 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                      </svg>
                    </div>
                  {{ end }}
                </div>
                {{ end }}
                {{ end }}
              </ul>
              {{ end }}


      - size: small
        title: Infos
        widgets:
          - type: clock
            hour-format: 24h
            timezones:
              - timezone: Europe/Paris
                label: Paris
              - timezone: America/New_York
                label: New York
              - timezone: Asia/Tokyo
                label: Tokyo
          - type: calendar
            first-day-of-week: monday
          - type: weather
            location: Berlin, Germany
            units: metric # alternatively "imperial"
            hour-format: 24h # alternatively "24h"
            # Optionally hide the location from being displayed in the widget
            # hide-location: true
          - type: group
            title: Services
            widgets:
              - type: monitor
                cache: 1m
                title: Services
                sites:
                  - title: SearXNG
                    url: http://search.localhost/
                  - title: Zoraxy
                    url: http://zoraxy.localhost/
                  - title: IT Tools
                    url: http://it-tools.localhost/
                  - title: Excalidraw Editor
                    url: http://excalidraw.localhost/
                  - title: Draw.io
                    url: http://drawio.localhost/
                  - title: Stirling PDF
                    url: http://stirling-pdf.localhost/
                  - title: HadgeDoc
                    url: http://hedgedoc.localhost/
                  - title: phpMyAdmin
                    url: http://phpmyadmin.localhost/
                  - title: Portainer
                    url: http://portainer.localhost/
                  - title: Authentik
                    url: http://oauth2.localhost/
              - type: docker-containers
                title: Docker Containers
                hide-by-default: true
  #############################################################################################
  - name: Social
    # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
    # hide-desktop-navigation: true
    slug: social
    title: Social
    center-vertically: true
    expand-mobile-page-navigation: true
    show-mobile-header: true
    columns:
      - size: full
        widgets:
          - type: search
            search-engine: http://search.localhost/search?q={QUERY}
            new-tab: true
            autofocus: true
            placeholder: Search the web...
          - type: twitch-channels
            channels:
              - tsoding
              - christitustech
          - type: videos
            channels:
              - UCXuqSBlHAE6Xw-yeJA0Tunw # Linus Tech Tips
              - UCEbYhDd6c6vngsF5PQpFVWg # Tsoding
              - UCrqM0Ym_NbK1fqeQG2VIohg # Tsoding Daily
              - UCqwGaUvq_l0RKszeHhZ5leA # PietSmiet
              - UCHnyfMqiRRG1u-2MsSQLbXA # Veritasium
            style: grid-cards

branding:
  custom-footer: |
    <a href="/home">2025 &copy; Fabian Aps</a>
  logo-url: /assets/logo.png
  favicon-url: /assets/logo.png
