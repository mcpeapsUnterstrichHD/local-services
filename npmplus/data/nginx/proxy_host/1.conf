# ------------------------------------------------------------
# npmplus.localhost, npmplus.comboompunktsucht.app, npmplus.mcpeapsunterstrichhd.dev
# DO NOT EDIT THIS FILE DIRECTLY, CHANGES WILL BE LOST WHEN UPDATING!
# ------------------------------------------------------------


server {
    set $forward_scheme "https";
    set $server "localhost";
    set $port "81";
    set $forward_path "";


    listen 0.0.0.0:80;
    listen [::]:80;


    listen 0.0.0.0:443 ssl;
    listen [::]:443 ssl;


    listen 0.0.0.0:443 quic;
    listen [::]:443 quic;
    more_set_headers 'Alt-Svc: h3=":443"; ma=86400';


    server_name npmplus.localhost npmplus.comboompunktsucht.app npmplus.mcpeapsunterstrichhd.dev;


    # Custom TLS
    ssl_certificate /data/tls/custom/npm-2/fullchain.pem;
    ssl_certificate_key /data/tls/custom/npm-2/privkey.pem;


    include conf.d/include/hsts.conf;


    # Force HTTPS
    include conf.d/include/force-https.conf;


    # Enable Brotli
    include conf.d/include/brotli.conf;


    include conf.d/include/always.conf;


    location / {

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;


        include conf.d/include/proxy-headers.conf;
        proxy_pass https://localhost:81$request_uri;

    }


    # custom locations
    # Custom
    include /data/custom_nginx/server_proxy.conf;
}

